/*! * file ./requestHandlers.js */var exec = require("child_process").exec;var querystring = require("querystring");var fs = require("fs");var formidable = require('formidable');/** * the function named startServer * @return {String} string */function startServer( request, response ) {	console.log('Request handler "startServer" was called.');		var body = '<html>' + 		'<head>' + 		'<meta http-equiv="Content-Type" content="text/html;charset=utf-8">' + 		'</head>' + 		'<body>' + 		'<form action="/upload" method="post" enctype="multipart/form-data">' + 		'<input type="file" name="upload" multiple="multiple"/>' + 		'<input type="submit" value="Upload File"/>' + 		'</form>' + 		'</body>' +		'</html>';	response.writeHead(200, {"Content-Type": "text/html"});	response.write( body );	response.end();}/** * the function named upload * @return {String} string */function upload( request, response ) {	console.log('Request handler "upload" was called.');		var form = new formidable.IncomingForm();	// begin parse	console.log('parse beginning...');	form.parse(request, function( error, fields, files ) {		console.log('parsing done.');		// save and rename		fs.renameSync(files.upload.path, './images/save.jpg');				response.writeHead(200, {"Content-Type": "text/html"});		response.write("received image:<br/>");		response.write('<img src="/show"/>');		response.end();	});}/** * the function named show */function show( request, response ) {	console.log("Request handler 'show' was called.");	fs.readFile("./images/test.jpg", "binary", function(error, file) {		if ( error ) {			response.writeHead(500, {"Content-Type": "text/plain"});			response.write(error + "\n");			console.log( error );			response.end();		} else {			response.writeHead(200, {"Content-Type": "image/png"});			response.write(file, "binary");			response.end();		}	});}exports.startServer = startServer;exports.upload = upload;exports.show = show;